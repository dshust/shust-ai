<% content_for :title, "–ù–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å ‚Äî –≠–Ω–≤–∞" %>

<div class="flex h-[calc(100vh-56px)]">

  <%# –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ %>
  <div class="w-[420px] shrink-0 bg-white border-r border-[#e5e5e5] flex flex-col">

    <div class="px-6 py-5 border-b border-[#e5e5e5]">
      <h2 class="text-[15px] font-semibold text-[#1a1a1a]">–û–ø–∏—à–∏—Ç–µ —Å–µ—Ä–≤–∏—Å</h2>
      <p class="text-xs text-[#a0a0a0] mt-0.5">–ò–ò —Å–æ–∑–¥–∞—Å—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ –≤–∞—à–µ–º—É –æ–ø–∏—Å–∞–Ω–∏—é</p>
    </div>

    <%= form_with url: enva_services_path, method: :post, id: "generate-form", data: { turbo: false } do |f| %>
      <div class="flex-1 px-6 py-5 flex flex-col gap-5">

        <%# –ù–∞–∑–≤–∞–Ω–∏–µ %>
        <div>
          <label class="block text-sm font-medium text-[#404040] mb-1.5">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞</label>
          <%= f.text_field :name, placeholder: "–ê–≤–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç", class: "w-full border border-[#e5e5e5] rounded-lg px-3 py-2 text-sm text-[#1a1a1a] placeholder-[#c0c0c0] focus:outline-none focus:border-[#0000CC]" %>
        </div>

        <%# –≠–º–æ–¥–∑–∏ %>
        <div>
          <label class="block text-sm font-medium text-[#404040] mb-1.5">–ò–∫–æ–Ω–∫–∞ (—ç–º–æ–¥–∑–∏)</label>
          <div class="flex gap-2 flex-wrap">
            <% %w[üßæ üìã üí∞ üìä üìÅ üîç üìù ‚öôÔ∏è üè¢ üìà].each do |e| %>
              <label class="cursor-pointer">
                <input type="radio" name="emoji" value="<%= e %>" class="hidden peer" <%= e == "üßæ" ? "checked" : "" %>>
                <span class="text-xl w-9 h-9 flex items-center justify-center rounded-lg border border-[#e5e5e5] peer-checked:border-[#0000CC] peer-checked:bg-[#f0f0ff] transition-colors select-none"><%= e %></span>
              </label>
            <% end %>
          </div>
        </div>

        <%# –û–ø–∏—Å–∞–Ω–∏–µ ‚Äî –≥–ª–∞–≤–Ω–æ–µ –ø–æ–ª–µ %>
        <div class="flex-1">
          <label class="block text-sm font-medium text-[#404040] mb-1.5">–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å —Å–µ—Ä–≤–∏—Å</label>
          <%= f.text_area :prompt, rows: 8,
            placeholder: "–ù–∞–ø—Ä–∏–º–µ—Ä: —Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤–∞–Ω—Å–æ–≤–æ–≥–æ –æ—Ç—á—ë—Ç–∞. –ü–æ–ª—è: –§–ò–û, –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ, —Ü–µ–ª—å –ø–æ–µ–∑–¥–∫–∏, –¥–∞—Ç–∞. –¢–∞–±–ª–∏—Ü–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —á–µ–∫–æ–≤. –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.",
            class: "w-full border border-[#e5e5e5] rounded-xl px-3 py-2.5 text-sm text-[#1a1a1a] placeholder-[#c0c0c0] focus:outline-none focus:border-[#0000CC] leading-relaxed resize-none" %>
        </div>

        <%# –ü–æ–¥—Å–∫–∞–∑–∫–∏ %>
        <div>
          <p class="text-xs text-[#a0a0a0] font-medium mb-2">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ:</p>
          <div class="flex flex-wrap gap-2">
            <% [
              "–ê–≤–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —á–µ–∫–æ–≤",
              "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ—á–Ω—ã—Ö",
              "–†–µ–µ—Å—Ç—Ä –¥–æ–≥–æ–≤–æ—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏",
              "–¢–∞–±–µ–ª—å —É—á—ë—Ç–∞ —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏",
              "–§–æ—Ä–º–∞ –∑–∞—è–≤–∫–∏ –Ω–∞ –æ—Ç–ø—É—Å–∫"
            ].each do |hint| %>
              <button type="button" onclick="document.querySelector('textarea[name=prompt]').value = '<%= hint %>'"
                class="text-xs bg-[#f0f0ff] text-[#0000CC] px-3 py-1.5 rounded-lg hover:bg-[#e0e0ff] transition-colors font-medium">
                <%= hint %>
              </button>
            <% end %>
          </div>
        </div>

      </div>

      <%# –ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ %>
      <div class="p-5 border-t border-[#e5e5e5]">
        <button type="submit" id="submit-btn"
          class="w-full flex items-center justify-center gap-2 text-sm font-semibold text-white rounded-xl py-3 transition-colors"
          style="background:#0000CC;"
          onmouseover="this.style.background='#0000aa'"
          onmouseout="this.style.background='#0000CC'">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
          </svg>
          –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å
        </button>
      </div>

    <% end %>
  </div>

  <%# –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å ‚Äî –∑–∞–≥–ª—É—à–∫–∞ –¥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ %>
  <div class="flex-1 flex flex-col items-center justify-center bg-[#f5f5f5] gap-4 text-[#c0c0c0]">
    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/><path d="M9 21V9"/>
    </svg>
    <p class="text-sm">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Ä–≤–∏—Å–∞</p>
  </div>

</div>

<script>
  document.getElementById('generate-form').addEventListener('submit', function() {
    const btn = document.getElementById('submit-btn');
    btn.disabled = true;
    btn.innerHTML = `
      <svg class="animate-spin" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
      </svg>
      –ì–µ–Ω–µ—Ä–∏—Ä—É—é...
    `;
    btn.style.background = '#3333cc';
  });
</script>
